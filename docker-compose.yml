version: "3.9"

services:
  djangoproject1:

    image: DOCKER_IMAGE
    #command: python manage.py runserver 0.0.0.0:8000
    # 先收集静态文件夹，然后uwsgi 启动
    command: bash -c "python manage.py collectstatic && uwsgi --ini uwsgi.ini"
    #command: uwsgi --http :8000 --module myobject.wsgi --py-autoreload=1
    volumes:
      # 把静态文件夹目录挂载出来,方便 nginx 转发
      - /opt/djangotest2/djangostatic:/djangostatic
    ports:
      - "8005:8000"
    restart: always

     # 限制容器日志的大小
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"